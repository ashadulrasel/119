<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>íÜúùî∏ùï§ùïôùïíùïïùï¶ùïù ‚Ñùùïíùï§ùïñùïùíÜú</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f2027" />
  <meta name="description" content="Premium glassmorphic landing with periodic toast for A.R Live Stream app." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent-1: #00eaff;
      --accent-2: #7cffc4;
      --accent-3: #3be9ff;
      --text: #ffffff;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100dvh;
      font-family: 'Hind Siliguri', system-ui, -apple-system, 'Segoe UI', Arial, sans-serif;
      color: var(--text);
      display: grid;
      place-items: center;
      overflow: hidden;
      background: radial-gradient(110% 90% at 10% 10%, #1b2b39 0%, #0f2027 35%, #0e1820 100%);
      position: relative;
      isolation: isolate;
    }
    /* Aurora background */
    body::before{
      content:"";
      position: absolute;
      inset: -20%;
      background:
        radial-gradient(60% 80% at 10% 20%, #00eaff26 0%, transparent 60%),
        radial-gradient(60% 80% at 90% 80%, #7cffc420 0%, transparent 70%),
        radial-gradient(60% 60% at 30% 90%, #3be9ff1f 0%, transparent 70%);
      filter: blur(40px) saturate(120%);
      z-index: -2;
      animation: aurora 16s ease-in-out infinite alternate;
    }
    @keyframes aurora {
      0% { transform: translateY(-2%) scale(1); opacity:.9; }
      100%{ transform: translateY(2%)  scale(1.03); opacity:1; }
    }
    @media (prefers-reduced-motion: reduce){ body::before{ animation:none; } }

    .container {
      position: relative;
      width: 100vw;
      height: 100dvh;
      display: grid;
      place-items: center;
      padding-inline: max(16px, env(safe-area-inset-left));
    }
    .logo-area {
      display: flex;
      align-items: center;
      gap: 28px;
      background: rgba(255,255,255,0.08);
      padding: 36px 48px;
      border-radius: 32px;
      box-shadow: 0 10px 50px #0006, 0 1.5px 0 #ffffff22 inset;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      position: relative;
      overflow: hidden;
      animation: float 4s ease-in-out infinite alternate;
    }
    @keyframes float {
      0% { transform: translateY(0) scale(1);}
      100%{ transform: translateY(-10px) scale(1.02);}
    }
    .logo-area::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(120deg, transparent 0%, #ffffff0f 40%, transparent 60%) ;
      transform: translateX(-120%);
      animation: sheen 6s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sheen {
      0%, 70% { transform: translateX(-120%); }
      100%    { transform: translateX(120%); }
    }

    .logo-img {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      box-shadow: 0 0 28px #ffffffaa, 0 0 22px #00eaff55;
      background: #fff;
      object-fit: cover;
      border: 4px solid #fff;
      animation: logoGlow 2.5s infinite alternate;
    }
    @keyframes logoGlow {
      0% { box-shadow: 0 0 16px #ffd70088, 0 0 8px #fff8;}
      100%{ box-shadow: 0 0 40px #00eaffcc, 0 0 24px #fff;}
    }

    .logo-text {
      font-size: clamp(1.6rem, 4vw, 2.6rem);
      font-weight: 700;
      letter-spacing: 1.2px;
      background: linear-gradient(270deg, #ff00cc, #3333ff, #00ffcc, #ffcc00, #ff00cc);
      background-size: 1000% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientMove 8s ease-in-out infinite;
      text-shadow: 0 2px 10px #0008, 0 0 20px #fff6, 0 0 40px #00f4;
      filter: drop-shadow(0 0 16px #fff6);
      user-select: none;
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50%{ background-position: 100% 50%; }
      100%{ background-position: 0% 50%; }
    }

    .telegram-btn {
      position: absolute;
      right: max(20px, env(safe-area-inset-right));
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(90deg, #0088cc 60%, #00eaff 100%);
      color: #fff;
      border: none;
      border-radius: 50px;
      padding: 16px 36px 16px 56px;
      font-size: 1.1rem;
      font-weight: 700;
      box-shadow: 0 8px 28px #0088cc66;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: background 0.3s, box-shadow 0.3s, transform 0.18s;
      text-decoration: none;
      z-index: 10;
    }
    .telegram-btn:hover {
      background: linear-gradient(90deg, #00eaff 60%, #0088cc 100%);
      box-shadow: 0 12px 34px #00eaff99;
      transform: translateY(-50%) scale(1.06);
    }
    .telegram-icon {
      position: absolute;
      left: 18px;
      width: 28px;
      height: 28px;
      fill: #fff;
      filter: drop-shadow(0 0 6px #00eaffcc);
    }
    @media (max-width: 820px) {
      .telegram-btn { position: static; transform: none; margin-top: 14px; padding: 12px 22px 12px 40px; }
      .telegram-icon { left: 12px; width: 22px; height: 22px; }
      .container { gap: 12px; place-items: center; }
      .logo-area { padding: 18px 14px; gap: 12px; }
      .logo-img { width: 64px; height: 64px; }
    }

    /* ===== Ultra Premium Toast ===== */
    .note-toast {
      --radius: 18px;
      --glass: rgba(255, 255, 255, 0.12);
      --border: rgba(255, 255, 255, 0.28);
      --shadow: 0 16px 60px #0007, 0 1px 0 #ffffff22 inset;

      position: fixed;
      left: 50%;
      bottom: calc(18px + env(safe-area-inset-bottom));
      width: min(94vw, 780px);
      padding: 16px 16px 20px 16px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 14px;
      z-index: 9999;
      overflow: hidden;
      isolation: isolate;

      background: radial-gradient(120% 140% at 0% 100%, #ffffff1a 0%, #ffffff0d 50%, #ffffff08 100%), var(--glass);
      color: #fff;
      -webkit-backdrop-filter: blur(12px);
      backdrop-filter: blur(12px);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);

      /* Motion/3D variables */
      --y: 120%;
      --scale: .98;
      --rx: 0deg;
      --ry: 0deg;

      transform: translate(-50%, var(--y)) rotateX(var(--rx)) rotateY(var(--ry)) scale(var(--scale));
      transition: transform 540ms cubic-bezier(.2,.8,.2,1), opacity 420ms ease;
      opacity: 0;
    }
    .note-toast.show { --y: 0%; --scale: 1; opacity: 1; }

    /* Left gradient edge */
    .note-toast::before {
      content: "";
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 5px;
      background: linear-gradient(180deg, var(--accent-1), var(--accent-2));
      box-shadow: 0 0 26px #00eaff66;
    }

    /* Decorative layers */
    .note-layers { position: absolute; inset: 0; pointer-events: none; }
    .note-aurora {
      position: absolute; inset: -20%;
      background:
        radial-gradient(40% 60% at 20% 100%, #00eaff22 0%, transparent 70%),
        radial-gradient(50% 50% at 80% 0%,   #7cffc420 0%, transparent 70%);
      filter: blur(28px) saturate(120%);
      animation: toastAurora 12s ease-in-out infinite alternate;
    }
    @keyframes toastAurora {
      0% { transform: translateY(0) scale(1); }
      100%{ transform: translateY(-4%) scale(1.04); }
    }
    .note-glow {
      position: absolute; inset: -30% -30% auto -30%; height: 60%;
      background: radial-gradient(60% 100% at 50% 100%, #00eaff33, transparent 70%);
      filter: blur(20px);
      opacity: .7;
    }
    .note-noise {
      position: absolute; inset: 0;
      background-image:
        linear-gradient(transparent 0%, rgba(255,255,255,.04) 50%, transparent 100%),
        repeating-linear-gradient(90deg, rgba(255,255,255,.02) 0, rgba(255,255,255,.02) 2px, transparent 3px, transparent 6px);
      mix-blend-mode: overlay; opacity:.6;
    }
    .note-particles { position: absolute; inset: 0; overflow: hidden; }
    .note-particles i{
      position: absolute; bottom: -8px;
      width: 6px; height: 6px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, transparent 60%);
      opacity: .8; filter: drop-shadow(0 0 6px #00eaffaa);
      animation: bubble 8s linear infinite;
    }
    /* A few particles with different paths */
    .note-particles i:nth-child(1){ left: 8%;  animation-duration: 7s; }
    .note-particles i:nth-child(2){ left: 22%; animation-duration: 9s; animation-delay: .6s; }
    .note-particles i:nth-child(3){ left: 35%; animation-duration: 8.5s; animation-delay: 1.2s; }
    .note-particles i:nth-child(4){ left: 48%; animation-duration: 7.6s; animation-delay: .2s; }
    .note-particles i:nth-child(5){ left: 62%; animation-duration: 9.6s; animation-delay: .9s; }
    .note-particles i:nth-child(6){ left: 76%; animation-duration: 8.2s; animation-delay: 1.3s; }
    .note-particles i:nth-child(7){ left: 89%; animation-duration: 7.8s; animation-delay: .4s; }
    @keyframes bubble {
      0%   { transform: translateY(0) translateX(0) scale(.9); opacity: .0; }
      10%  { opacity: .8; }
      100% { transform: translateY(-160%) translateX(-10px) scale(1.2); opacity: 0; }
    }

    .note-icon {
      width: 44px; height: 44px;
      display: grid; place-content: center;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
      box-shadow: 0 10px 26px #00eaff66, inset 0 1px 0 #ffffff66;
      color: #00232e;
      align-self: start;
      margin-left: 2px;
      position: relative;
      overflow: hidden;
      transform: translateZ(18px);
    }
    .note-icon::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(60% 60% at 30% 20%, #ffffff66, transparent 60%);
      opacity:.8; pointer-events:none;
    }
    .note-icon .emoji { font-size: 24px; filter: drop-shadow(0 0 6px #ffffffaa); }

    .note-content { display: flex; flex-direction: column; gap: 6px; transform: translateZ(12px); }
    .note-title {
      margin: 0;
      font-size: clamp(15px, 2.8vw, 18px);
      font-weight: 700;
      letter-spacing: .2px;
      text-shadow: 0 1px 10px #0007;
    }
    .note-text {
      margin: 0;
      font-size: clamp(14px, 2.6vw, 16px);
      line-height: 1.6;
      text-wrap: pretty;
    }

    .note-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      transform: translateZ(20px);
    }
    .note-cta {
      appearance: none; border: none; cursor: pointer;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 800;
      color: #00232e;
      background: linear-gradient(135deg, #00ffc6, #3be9ff);
      box-shadow: 0 8px 26px #00eaff66, inset 0 1px 0 #ffffffaa;
      transition: transform .15s ease, box-shadow .25s ease, filter .2s ease;
      text-decoration: none; white-space: nowrap;
      font-size: 14px; position: relative; overflow: hidden;
    }
    .note-cta::after{
      content:"";
      position:absolute; top:0; bottom:0; left:-40%;
      width:40%; transform: skewX(-24deg);
      background: linear-gradient(90deg, #ffffff55, transparent);
      opacity: 0; pointer-events:none;
      transition: opacity .2s;
    }
    .note-cta:hover { transform: translateY(-1px); box-shadow: 0 12px 32px #00eaff99; }
    .note-cta:hover::after { animation: ctaShine 1.2s ease; opacity: 1; }
    @keyframes ctaShine { from { left: -40%; } to { left: 140%; } }
    .ripple {
      position: absolute; border-radius: 50%;
      transform: scale(0); background: #ffffff88;
      animation: ripple .6s ease-out forwards; pointer-events: none;
      mix-blend-mode: overlay;
    }
    @keyframes ripple { to { transform: scale(1); opacity: 0; } }

    .note-close, .note-optout {
      height: 36px; display: grid; place-content: center;
      border-radius: 999px; background: #ffffff16; color:#fff;
      border: 1px solid #ffffff22; box-shadow: inset 0 1px 0 #ffffff55;
      cursor: pointer; padding: 0 12px; font-weight: 700;
      transition: background .2s ease, transform .15s ease;
      white-space: nowrap; font-size: 13px;
    }
    .note-close { width: 36px; padding: 0; }
    .note-close:hover, .note-optout:hover { background:#ffffff24; transform: translateY(-1px); }

    /* Progress bar */
    .note-progress {
      position: absolute; left: 0; right: 0; bottom: 0;
      height: 3px; background: #ffffff1a;
      border-radius: 0 0 var(--radius) var(--radius);
      overflow: hidden;
    }
    .note-progress-bar {
      width: 0%; height: 100%;
      background: linear-gradient(90deg, #00ffc6, #00eaff, #77faff);
      background-size: 200% 100%;
      box-shadow: 0 0 12px #00eaffaa;
      animation: none;
    }
    @keyframes noteProgress { from { width: 0%; background-position: 0% 50%; } to { width: 100%; background-position: 100% 50%; } }

    @media (prefers-reduced-motion: reduce){
      .logo-area, .logo-img, .logo-text, .telegram-btn, .note-toast,
      .note-aurora, .note-particles i { animation: none !important; transition: none !important; }
      .note-progress-bar { animation: none !important; }
    }
    @media (max-width: 640px) {
      .note-actions { gap: 6px; flex-wrap: wrap; justify-content: flex-end; }
      .note-cta { padding: 9px 12px; font-size: 13px; }
      .note-close { width: 34px; height: 34px; }
      .note-optout { font-size: 12px; padding: 0 10px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo-area">
      <img class="logo-img" src="https://iili.io/F4fJTgI.jpg" alt="Logo">
      <div class="logo-text">íÜúùî∏ùï§ùïôùïíùïïùï¶ùïù ‚Ñùùïíùï§ùïñùïùíÜú</div>
    </div>

    <a href="https://t.me/AllFreePlatform" target="_blank" rel="noopener noreferrer" class="telegram-btn">
      <svg class="telegram-icon" viewBox="0 0 240 240" aria-hidden="true" focusable="false">
        <circle cx="120" cy="120" r="120" fill="#0088cc"/>
        <path d="M180.7 70.6c2.2-9.1-7.1-16.6-15.2-12.7L44.7 120.2c-8.1 3.9-7.7 15.5.6 18.7‡¶≤34.2 13.7 13.7 34.2c3.2 8.3 14.8 8.7 18.7.6l62.3-120.8z" fill="#fff"/>
        <path d="M180.7 70.6l-62.3 120.8c-3.9 8.1-15.5 7.7-18.7-.6l-13.7-34.2 94.7-85.9z" fill="#c8e6fa"/>
      </svg>
      Join Telegram
    </a>
  </div>

  <!-- Ultra Premium Toast -->
  <div id="note-toast" class="note-toast" role="status" aria-live="polite" aria-atomic="true" aria-label="‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®">
    <div class="note-layers" aria-hidden="true">
      <div class="note-aurora"></div>
      <div class="note-glow"></div>
      <div class="note-noise"></div>
      <div class="note-particles">
        <i></i><i></i><i></i><i></i><i></i><i></i><i></i>
      </div>
    </div>

    <div class="note-icon" aria-hidden="true"><span class="emoji">üì∫</span></div>

    <div class="note-content">
      <h3 class="note-title">A.R Live Stream ‚Äî ‡¶¨‡¶æ‡¶´‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ü‡¶ø‡¶≠‡¶ø</h3>
      <p class="note-text">
        ‡¶™‡ßç‡¶∞‡¶ø‡ßü IPTV ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶ø‡¶ó‡¶®,
        ‡¶Ü‡¶™‡¶®‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶∏‡¶≤‡¶æ‡¶Æ ‡¶¨‡¶æ‡¶´‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ü‡¶ø‡¶≠‡¶ø ‡¶â‡¶™‡¶≠‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶è‡¶ï ‡¶¶‡¶æ‡¶∞‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ A.R Live Stream ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡•§
        ‡¶è‡¶ñ‡¶®‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßá‡¶æ‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ü‡¶∞ ‡¶â‡¶™‡¶≠‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
      </p>
    </div>

    <div class="note-actions">
      <a id="note-cta" class="note-cta" href="https://t.me/AllFreePlatform/359" target="_blank" rel="noopener noreferrer">‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</a>
      <button id="note-close" class="note-close" type="button" aria-label="‡¶®‡ßã‡¶ü ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®" title="‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®">‚úï</button>
    </div>

    <div class="note-progress" aria-hidden="true">
      <div class="note-progress-bar"></div>
    </div>
  </div>

  <script>
    (function () {
      const toast = document.getElementById('note-toast');
      const closeBtn = document.getElementById('note-close');
      const optoutBtn = document.getElementById('note-optout');
      const ctaBtn = document.getElementById('note-cta');
      const progressBar = toast.querySelector('.note-progress-bar');

      const STORAGE_KEY = 'ar_live_stream_toast_optout';
      const INTERVAL_MS = 10000; // 10s ‡¶™‡¶∞‡¶™‡¶∞ ‡¶∂‡ßã
      const VISIBLE_MS  = 4000;  // 4s ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®
      const FIRST_DELAY = 900;   // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶°‡¶ø‡¶≤‡ßá

      let isShowing = false;
      let hideTimer = null;
      let intervalId = null;

      // Pause/Resume state
      let remaining = VISIBLE_MS;
      let startTime = 0;

      const isOptedOut = () => localStorage.getItem(STORAGE_KEY) === '1';

      function startProgress(duration) {
        progressBar.style.animation = 'none';
        progressBar.style.width = '0%';
        void progressBar.offsetWidth;
        progressBar.style.animation = `noteProgress ${duration}ms linear forwards`;
      }

      function showToast() {
        if (isShowing || isOptedOut() || document.hidden) return;
        isShowing = true;
        remaining = VISIBLE_MS;
        startTime = performance.now();
        toast.classList.add('show');
        startProgress(remaining);
        hideTimer = setTimeout(hideToast, remaining);
      }

      function hideToast() {
        toast.classList.remove('show');
        isShowing = false;
        clearTimeout(hideTimer);
        hideTimer = null;
        progressBar.style.animation = 'none';
        toast.style.removeProperty('--y');
        toast.style.removeProperty('--scale');
        toast.style.removeProperty('opacity');
      }

      function pauseToast() {
        if (!isShowing) return;
        const elapsed = performance.now() - startTime;
        remaining = Math.max(0, remaining - elapsed);
        clearTimeout(hideTimer);
        hideTimer = null;
        progressBar.style.animationPlayState = 'paused';
      }

      function resumeToast() {
        if (!isShowing || remaining <= 0) return;
        startTime = performance.now();
        // Resume progress animation from current width
        const containerWidth = toast.querySelector('.note-progress').clientWidth || 1;
        const currentWidth = progressBar.getBoundingClientRect().width;
        const pct = Math.min(100, Math.max(0, (currentWidth / containerWidth) * 100));
        progressBar.style.animation = 'none';
        progressBar.style.width = pct + '%';
        void progressBar.offsetWidth;
        progressBar.style.animation = `noteProgress ${remaining}ms linear forwards`;
        progressBar.style.animationPlayState = 'running';
        hideTimer = setTimeout(hideToast, remaining);
      }

      // Hover/focus pause
      toast.addEventListener('mouseenter', pauseToast);
      toast.addEventListener('mouseleave', resumeToast);
      toast.addEventListener('focusin', pauseToast);
      toast.addEventListener('focusout', resumeToast);

      // Touch: swipe-down to dismiss, hold to pause
      let touchStartY = 0;
      let dragging = false;

      toast.addEventListener('touchstart', (e) => {
        if (!isShowing) return;
        touchStartY = e.touches[0].clientY;
        dragging = true;
        pauseToast();
      }, { passive: true });

      toast.addEventListener('touchmove', (e) => {
        if (!dragging) return;
        const dy = e.touches[0].clientY - touchStartY;
        const translateY = Math.max(0, dy);
        toast.style.setProperty('--y', translateY + 'px');
        toast.style.setProperty('--scale', '0.98');
        toast.style.opacity = String(Math.max(0.35, 1 - translateY / 300));
      }, { passive: true });

      toast.addEventListener('touchend', () => {
        if (!dragging) return;
        dragging = false;
        const yVar = toast.style.getPropertyValue('--y');
        const translateY = yVar ? parseFloat(yVar) : 0;
        toast.style.removeProperty('--scale');
        toast.style.removeProperty('opacity');
        if (translateY > 100) {
          toast.style.removeProperty('--y');
          hideToast();
        } else {
          toast.style.removeProperty('--y');
          resumeToast();
        }
      });

      // Close / Opt-out
      closeBtn.addEventListener('click', hideToast);
      optoutBtn.addEventListener('click', () => {
        localStorage.setItem(STORAGE_KEY, '1');
        hideToast();
        clearInterval(intervalId);
      });

      // CTA ripple
      ctaBtn.addEventListener('click', (e) => {
        const rect = ctaBtn.getBoundingClientRect();
        const r = Math.max(rect.width, rect.height);
        const span = document.createElement('span');
        span.className = 'ripple';
        span.style.width = span.style.height = r + 'px';
        span.style.left = (e.clientX - rect.left - r / 2) + 'px';
        span.style.top  = (e.clientY - rect.top  - r / 2) + 'px';
        ctaBtn.appendChild(span);
        setTimeout(() => span.remove(), 650);
      });

      // 3D tilt (pointer devices only)
      const supportsTilt = matchMedia('(pointer: fine) and (hover: hover)').matches && !matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (supportsTilt) {
        toast.style.transformStyle = 'preserve-3d';
        toast.addEventListener('mousemove', (e) => {
          if (!isShowing) return;
          const r = toast.getBoundingClientRect();
          const x = (e.clientX - r.left) / r.width;
          const y = (e.clientY - r.top) / r.height;
          const ry = (x - 0.5) * 8;   // rotateY
          const rx = -(y - 0.5) * 6;  // rotateX
          toast.style.setProperty('--rx', rx.toFixed(2) + 'deg');
          toast.style.setProperty('--ry', ry.toFixed(2) + 'deg');
        });
        toast.addEventListener('mouseleave', () => {
          toast.style.setProperty('--rx', '0deg');
          toast.style.setProperty('--ry', '0deg');
        });
      }

      // Tab visibility
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          clearInterval(intervalId);
        } else if (!isOptedOut()) {
          clearInterval(intervalId);
          intervalId = setInterval(showToast, INTERVAL_MS);
        }
      });

      // Schedule
      if (!isOptedOut()) {
        setTimeout(showToast, FIRST_DELAY);
        intervalId = setInterval(showToast, INTERVAL_MS);
      }

      // Cleanup
      window.addEventListener('pagehide', () => {
        clearInterval(intervalId);
        clearTimeout(hideTimer);
      });
    })();
  </script>
</body>
</html>

