<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ùïÉùïöùïßùïñ ùïäùï•ùï£ùïñùïíùïû ‚Äî Premium Live TV</title>
  <meta name="theme-color" content="#0b1020" />
  <meta name="description" content="Premium Live TV with liquid-glass UI, HLS player, login tiers, quality switch, PiP, banners, responsive." />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://images.unsplash.com" />
  <link rel="preconnect" href="https://d2zihajmogu5jn.cloudfront.net" />
  <link rel="preconnect" href="https://commondatastorage.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020;
      --glass:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.18);
      --txt:#e6ecff;
      --muted:#a9b5d6;
      --brand:#6be7ff;
      --brand2:#7b7bff;
      --accent:#ff4d8d;
      --success:#26e58d;
      --warning:#ffb84d;
      --danger:#ff5d5d;
      --shadow:0 10px 40px rgba(0,0,0,.35), inset 0 0 1px rgba(255,255,255,.08);
      --radius:18px;
      --blur:18px;
      --speed:26s;
      --actions-w: 340px; /* auto-measured by JS */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Plus Jakarta Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--txt);
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(107,231,255,.15), transparent 40%),
        radial-gradient(900px 600px at 90% 0%, rgba(123,123,255,.18), transparent 35%),
        url('https://images.unsplash.com/photo-1583409430135-1ccd865c940e?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0') center/cover fixed no-repeat #0b1020;
      overflow-x:hidden;
    }
    .container{width:min(1280px,92vw); margin:0 auto}
    .glass{
      background:linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.04));
      backdrop-filter:blur(var(--blur)) saturate(130%);
      -webkit-backdrop-filter:blur(var(--blur)) saturate(130%);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }
    a{color:inherit; text-decoration:none}
    button{font:inherit; color:inherit}

    /* NAV ‚Äî grid + stable actions width */
    .nav{position:sticky; top:0; z-index:90; margin:12px auto 8px; padding:10px 14px}
    .nav-inner{
      display:grid; align-items:center; gap:12px;
      grid-template-columns:max-content 1fr max-content;
    }
    .brand{display:flex; align-items:center; gap:16px; padding:6px 10px; border-radius:14px}
    .logo-wrap{
      position:relative; width:80px; height:80px; flex:0 0 80px; border-radius:50%;
      display:grid; place-items:center; animation:logoFloat 4.8s ease-in-out infinite; will-change:transform;
    }
    .logo-wrap::before{
      content:''; position:absolute; inset:-8px; border-radius:50%;
      background:conic-gradient(from 0deg, rgba(107,231,255,.55), rgba(255,134,201,.45), rgba(123,123,255,.5), rgba(107,231,255,.55));
      filter:blur(18px); animation:ringSpin 18s linear infinite;
    }
    .brand img{
      width:80px; height:80px; border-radius:50%;
      box-shadow:0 12px 28px rgba(0,0,0,.5);
      animation:popIn .8s cubic-bezier(.2,.9,.2,1) both; will-change:transform, filter;
    }
    .btext{
      position:relative;
      font-weight:900; letter-spacing:.4px; font-size:28px;
      background:linear-gradient(90deg, #fff, var(--brand), var(--brand2), #fff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      background-size:260% 100%; animation:textShimmer 5.5s linear infinite;
      filter:drop-shadow(0 2px 10px rgba(107,231,255,.35)); will-change:background-position, transform;
    }
    .btext::after{
      content:''; position:absolute; top:0; left:-30%;
      width:30%; height:100%; pointer-events:none;
      background:linear-gradient(90deg, transparent, rgba(255,255,255,.45), transparent);
      transform:skewX(-20deg);
      animation:shineSweep 4.8s ease-in-out infinite; mix-blend-mode:screen; opacity:.6;
    }
    @keyframes popIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
    @keyframes ringSpin{to{transform:rotate(360deg)}}
    @keyframes logoFloat{0%{transform:translateY(0)}50%{transform:translateY(-3px)}100%{transform:translateY(0)}}
    @keyframes textShimmer{0%{background-position:0% 50%}100%{background-position:260% 50%}}
    @keyframes shineSweep{0%{left:-40%} 55%{left:110%} 100%{left:110%}}

    .nav-links{
      display:flex; align-items:center; gap:10px; justify-content:center;
      overflow:auto; white-space:nowrap; padding:0 6px 6px; scrollbar-width:none;
    }
    .nav-links::-webkit-scrollbar{display:none}
    .pill-btn{
      padding:10px 14px; border-radius:999px; border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      transition:all .25s ease; cursor:pointer; will-change:transform;
    }
    .pill-btn:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.35)}
    .primary{background:linear-gradient(90deg, var(--brand), var(--brand2)); color:#06111a; font-weight:700; border:none}
    .login-btn{background:linear-gradient(90deg, #ff8ab3, #a98bff); color:#1b0c20; font-weight:700; border:none}
    .lan-toggle{min-width:72px; text-align:center}

    .nav-actions{
      display:flex; align-items:center; gap:10px; justify-content:flex-end;
      width:clamp(280px, var(--actions-w), 460px);
      flex:0 0 clamp(280px, var(--actions-w), 460px);
    }
    #loginOpen{white-space:nowrap}
    .profile{display:none; align-items:center; gap:10px; min-width:0}
    .avatar{width:36px; height:36px; border-radius:50%; background:url('https://avatars.githubusercontent.com/u/192325222?v=4') center/cover}
    .role{padding:4px 8px; border-radius:9px; font-weight:800}
    .role.B{background:linear-gradient(90deg,#d6f0ff,#9edbff); color:#06161d}
    .role.Pro{background:linear-gradient(90deg,#a5b4ff,#7aa6ff); color:#0d0b2b}
    .role.ProPlus{background:linear-gradient(90deg,#ffb1e2,#ff86c9); color:#2b0019}

    /* Info Rail (below Nav): Notice ‚Ä¢ Updates ‚Ä¢ News */
    .info-rail{margin:10px auto 12px; padding:10px 12px; position:relative; overflow:hidden}
    .info-rail::before{
      content:''; position:absolute; inset:-2px; border-radius:calc(var(--radius) + 2px);
      background:conic-gradient(from 0deg, rgba(107,231,255,.35), rgba(255,134,201,.35), rgba(123,123,255,.35), rgba(107,231,255,.35));
      filter:blur(12px); opacity:.5; z-index:0; pointer-events:none; animation:spin 12s linear infinite;
      mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); -webkit-mask-composite:xor; mask-composite:exclude; padding:2px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .ir-inner{position:relative; z-index:1; display:grid; gap:10px}
    .ir-tabs{display:flex; gap:8px; flex-wrap:wrap}
    .ir-tab{padding:8px 12px; border-radius:999px; border:1px solid var(--stroke); background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03)); cursor:pointer; transition:all .2s; font-weight:700}
    .ir-tab.active{color:#06111a; border:none; background:linear-gradient(90deg, #aef, #7df, #a98bff); box-shadow:0 6px 24px rgba(107,231,255,.28)}
    .ir-track-wrap{position:relative; overflow:hidden; border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,.04)}
    .ir-track{display:flex; gap:28px; white-space:nowrap; padding:10px 14px; align-items:center; animation:irScroll var(--speed) linear infinite; will-change:transform}
    .ir-track:hover{animation-play-state:paused}
    @keyframes irScroll{from{transform:translateX(0)} to{transform:translateX(-50%)}}
    .ir-item{display:flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:linear-gradient(135deg, rgba(255,255,255,.14), rgba(255,255,255,.06)); border:1px solid rgba(255,255,255,.2); box-shadow:0 4px 16px rgba(0,0,0,.25); font-weight:600}
    .ir-tag{padding:4px 8px; border-radius:999px; font-size:12px; font-weight:800; color:#06111a; background:linear-gradient(90deg,#ff7a7a,#ff4d5e)}
    .ir-tag.up{background:linear-gradient(90deg,#a5b4ff,#7aa6ff)}
    .ir-tag.news{background:linear-gradient(90deg,#9ef,#7df)}

    /* HERO slider (Ken Burns + arrows) */
    .slider{position:relative; overflow:hidden; border-radius:var(--radius); margin:18px 0}
    .slides{display:flex; transition:transform .7s cubic-bezier(.2,.8,.2,1); will-change:transform}
    .slide{min-width:100%; aspect-ratio:16/9; max-height:480px; position:relative; overflow:hidden; display:grid; place-items:center; background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.5))}
    .slide img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; animation:kenburns 16s ease-in-out infinite}
    @keyframes kenburns{0%{transform:scale(1)}50%{transform:scale(1.07) translate(1.2%,-1.2%)}100%{transform:scale(1)}}
    .s-overlay{position:absolute; inset:0; background:linear-gradient(180deg, rgba(0,0,0,.3), rgba(0,0,0,.6))}
    .s-content{position:relative; z-index:2; align-self:end; padding:18px}
    .s-title{font-size:22px; font-weight:900; margin-bottom:6px}
    .s-sub{color:var(--muted); margin-bottom:10px}
    .s-cta{display:flex; gap:10px}
    .cta{padding:10px 14px; border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,.08); cursor:pointer}
    .cta.primary{background:linear-gradient(90deg,#aef,#7df,#a98bff); color:#07121b; font-weight:800; border:none}
    .dots{position:absolute; bottom:10px; left:50%; transform:translateX(-50%); display:flex; gap:8px; z-index:3}
    .dot{width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,.35); border:none; cursor:pointer}
    .dot.active{background:#fff}
    .arrow{position:absolute; top:50%; transform:translateY(-50%); z-index:3; width:42px; height:42px; border-radius:50%; border:1px solid var(--stroke); background:rgba(0,0,0,.35); display:grid; place-items:center; cursor:pointer; color:#fff}
    .arrow:hover{background:rgba(0,0,0,.5)}
    .prev{left:10px}.next{right:10px}

    /* Sections / Filters / Channel grid */
    .section{padding:14px}
    .hrow{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .h1{font-size:22px; font-weight:900; letter-spacing:.3px}
    .muted{color:var(--muted)}
    .filter-bar{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px}
    .chip{border-radius:999px; padding:9px 14px; border:1px solid var(--stroke); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); cursor:pointer; transition:all .2s}
    .chip.active{border-color:#9edbff; box-shadow:0 6px 20px rgba(107,231,255,.18), inset 0 0 0 1px rgba(255,255,255,.12)}
    .grid{display:grid; gap:14px; margin:16px 0 28px}
    @media(min-width:520px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:840px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media(min-width:1100px){.grid{grid-template-columns:repeat(4,1fr)}}

    .card{position:relative; overflow:hidden; border-radius:16px; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border:1px solid var(--stroke); box-shadow:var(--shadow); cursor:pointer; min-height:170px; transition:transform .25s ease, box-shadow .25s ease}
    .card:hover{transform:translateY(-2px) scale(1.01); box-shadow:0 12px 36px rgba(0,0,0,.46)}
    .thumb{display:grid; place-items:center; aspect-ratio:16/9; background:radial-gradient(600px 200px at 50% -20%, rgba(255,255,255,.1), transparent 40%), rgba(0,0,0,.25)}
    .thumb .logo-frame{width:90%; height:80%; display:grid; place-items:center}
    .thumb img{max-width:100%; max-height:100%; width:auto; height:auto; object-fit:contain; image-rendering:-webkit-optimize-contrast; filter:drop-shadow(0 2px 8px rgba(0,0,0,.5)); transition:transform .35s ease}
    .card:hover .thumb img{transform:scale(1.05)}
    .meta{display:flex; align-items:center; justify-content:space-between; padding:10px 12px}
    .title{font-weight:700}
    .badges{display:flex; gap:6px; flex-wrap:wrap}
    .badge{padding:4px 8px; border-radius:8px; font-size:12px; border:1px solid rgba(255,255,255,.2); background:linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); animation:float .9s ease-in-out infinite alternate}
    .b-live{background:linear-gradient(90deg,#ff7a7a,#ff4d5e); color:#2a0000; border:none; font-weight:800}
    .b-pro{background:linear-gradient(90deg,#a5b4ff,#7aa6ff); color:#0a102a; border:none; font-weight:800}
    .b-free{background:linear-gradient(90deg,#c2ffd4,#66ffad); color:#052a17; border:none; font-weight:800}
    .b-hd{background:linear-gradient(90deg,#9ef,#7df)}
    .b-2k{background:linear-gradient(90deg,#fdd87b,#ffb84d)}
    .b-4k{background:linear-gradient(90deg,#8df,#6bf)}
    .b-8k{background:linear-gradient(90deg,#ffb1e2,#ff86c9)}
    .b-B{background:linear-gradient(90deg,#d6f0ff,#9edbff); color:#07161f; font-weight:800; border:none}
    @keyframes float{from{transform:translateY(0)}to{transform:translateY(-2px)}}

    /* Events (glass tiles) */
    .events{display:grid; gap:14px; margin:12px 0 22px}
    @media(min-width:780px){.events{grid-template-columns:repeat(2,1fr)}}
    .event{display:flex; gap:12px; align-items:center; padding:12px; border-radius:16px; background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03)); border:1px solid var(--stroke); box-shadow:var(--shadow)}
    .ev-left{width:66px; height:66px; border-radius:12px; overflow:hidden; flex:0 0 66px; background:#000; border:1px solid rgba(255,255,255,.15)}
    .ev-left img{width:100%; height:100%; object-fit:cover}
    .ev-mid{flex:1}
    .ev-title{font-weight:900; font-size:16px; margin-bottom:4px}
    .ev-sub{font-size:12px; color:var(--muted)}
    .ev-right{display:flex; flex-direction:column; align-items:flex-end; gap:6px}
    .etime{font-weight:800; color:#bfe9ff}
    .etag{padding:6px 10px; border-radius:999px; background:linear-gradient(90deg,#9ef,#7df); color:#071621; font-weight:800}

    /* Ribbon (above footer) */
    .ribbon{margin:16px auto; padding:12px; position:relative; overflow:hidden}
    .rib-title{font-weight:900; margin-bottom:8px}
    .rib-wrap{position:relative; overflow:hidden; border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,.04)}
    .rib-track{display:flex; gap:12px; padding:10px; animation:irScroll calc(var(--speed) + 8s) linear infinite}
    .rib-track:hover{animation-play-state:paused}
    .rib-card{min-width:280px; max-width:320px; display:flex; gap:10px; align-items:center; background:linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border:1px solid rgba(255,255,255,.2); border-radius:12px; overflow:hidden; padding:8px; box-shadow:0 6px 22px rgba(0,0,0,.3)}
    .rib-img{width:64px; height:42px; border-radius:8px; overflow:hidden; flex:0 0 64px; background:#000}
    .rib-img img{width:100%; height:100%; object-fit:cover}
    .rib-meta{display:flex; flex-direction:column; gap:4px}
    .rib-tag{font-size:12px; font-weight:800; padding:2px 8px; border-radius:999px; width:max-content; color:#06111a}
    .rib-tag.notice{background:linear-gradient(90deg,#ff7a7a,#ff4d5e)}
    .rib-tag.update{background:linear-gradient(90deg,#a5b4ff,#7aa6ff)}
    .rib-tag.news{background:linear-gradient(90deg,#9ef,#7df)}

    /* Footer */
    .footer{margin:16px auto 26px; padding:12px 14px}
    .socials{display:flex; gap:10px; flex-wrap:wrap}
    .socials a{padding:10px 14px; border-radius:999px; border:1px solid var(--stroke); background:rgba(255,255,255,.06)}

    /* Player ‚Äî Cinematic + custom controls */
    .modal{position:fixed; inset:0; display:none; place-items:center; z-index:100}
    .modal.active{display:grid}
    .modal-bg{position:absolute; inset:0; background:rgba(0,0,0,.6); backdrop-filter: blur(6px); animation:fadeIn .25s}
    @keyframes fadeIn{from{opacity:0} to{opacity:1}}
    .modal-body{position:relative; width:min(1100px, 94vw); border-radius:18px; overflow:hidden; background:linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.85)); border:1px solid rgba(255,255,255,.18); box-shadow:0 14px 60px rgba(0,0,0,.6)}
    .player-wrap{position:relative; background:#000; border-radius:18px; overflow:hidden}
    .player-wrap::before{content:''; position:absolute; inset:0; pointer-events:none; border-radius:18px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.08), inset 0 0 80px rgba(107,231,255,.08)}
    video{width:100%; height:auto; background:#000; aspect-ratio:16/9}
    .spinner{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:54px; height:54px; border-radius:50%; border:3px solid rgba(255,255,255,.2); border-top-color:#9edbff; animation:spin 1s linear infinite; z-index:4}
    @keyframes spin{to{transform:translate(-50%,-50%) rotate(360deg)}}
    .toast{position:absolute; top:10px; right:10px; padding:10px 12px; border-radius:10px; background:rgba(255,93,93,.15); border:1px solid rgba(255,93,93,.35); color:#ffdede; font-weight:700; z-index:5}
    .hidden{display:none !important}

    .player-ui{position:absolute; inset:0; display:flex; flex-direction:column; justify-content:space-between; pointer-events:none}
    .p-top,.p-bottom{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px; pointer-events:auto}
    .p-top{background:linear-gradient(180deg, rgba(0,0,0,.65), transparent)}
    .p-bottom{background:linear-gradient(0deg, rgba(0,0,0,.7), transparent)}
    .p-title{display:flex; align-items:center; gap:10px; font-weight:900; font-size:16px}
    .live-dot{width:10px; height:10px; border-radius:50%; background:#ff4d5e; box-shadow:0 0 12px #ff4d5e}

    .controls{display:flex; align-items:center; gap:8px}
    .ctl{border-radius:10px; border:1px solid rgba(255,255,255,.2); background:rgba(255,255,255,.08); padding:8px 10px; cursor:pointer; transition:all .2s; display:flex; align-items:center; gap:6px; color:#fff}
    .ctl:hover{background:rgba(255,255,255,.15)}
    .quality-menu{position:relative}
    .q-list{position:absolute; right:0; top:110%; background:rgba(0,0,0,.85); border:1px solid rgba(255,255,255,.18); border-radius:10px; padding:6px; display:none}
    .q-list button{display:block; width:100%; text-align:left; white-space:nowrap}
    .quality-menu.open .q-list{display:block}

    .progress{display:flex; align-items:center; gap:8px; flex:1; padding:0 6px}
    .time{font-size:12px; color:#d7e8ff; min-width:60px; text-align:center}
    input[type="range"].bar{
      -webkit-appearance:none; appearance:none; height:6px; width:100%; background:rgba(255,255,255,.2); border-radius:999px; outline:none;
    }
    input[type="range"].bar::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:50%; background:#9edbff; box-shadow:0 0 0 6px rgba(158,219,255,.25);
    }
    input[type="range"].vol{
      -webkit-appearance:none; appearance:none; height:6px; width:90px; background:rgba(255,255,255,.2); border-radius:999px; outline:none;
    }
    input[type="range"].vol::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none; width:12px; height:12px; border-radius:50%; background:#fff;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      .logo-wrap,.brand img,.btext,.btext::after,.ir-track,.rib-track,.slides,.slide img{animation:none !important}
      .pill-btn,.card{transition:none !important}
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="nav glass container">
    <div class="nav-inner">
      <div class="brand">
        <div class="logo-wrap">
          <img src="https://avatars.githubusercontent.com/u/192325222?v=4" alt="Brand">
        </div>
        <div class="btext">ùïÉùïöùïßùïñ ùïäùï•ùï£ùïñùïíùïû</div>
      </div>

      <nav class="nav-links">
        <a class="pill-btn" href="#home" data-i18n="nav.home">‡¶π‡ßã‡¶Æ</a>
        <a class="pill-btn" href="#channels" data-i18n="nav.channels">‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</a>
        <a class="pill-btn" href="#events" data-i18n="nav.events">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</a>
        <a class="pill-btn primary" href="https://example.com" target="_blank" rel="noopener" data-i18n="nav.site1">‡¶Ö‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶á‡¶ü ‡ßß</a>
        <a class="pill-btn primary" href="https://example.org" target="_blank" rel="noopener" data-i18n="nav.site2">‡¶Ö‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶á‡¶ü ‡ß®</a>
      </nav>

      <div class="nav-actions">
        <button class="pill-btn lan-toggle" id="langBtn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
        <div id="profile" class="profile">
          <div class="avatar"></div>
          <div>
            <div id="pname" style="font-weight:800">USER</div>
            <div class="muted" style="font-size:12px" id="pexp"></div>
          </div>
          <span id="prole" class="role">Tier</span>
          <button class="pill-btn" id="logoutBtn" data-i18n="auth.logout">‡¶≤‡¶ó-‡¶Ü‡¶â‡¶ü</button>
        </div>
        <button class="pill-btn login-btn" id="loginOpen" data-i18n="auth.login">‡¶≤‡¶ó-‡¶á‡¶®</button>
      </div>
    </div>
  </header>

  <!-- Info Rail (Below Nav) -->
  <div class="info-rail glass container" role="region" aria-label="Info Rail">
    <div class="ir-inner">
      <div class="ir-tabs">
        <button class="ir-tab active" data-tab="notice" data-i18n="ir.notice">‡¶®‡ßã‡¶ü‡¶ø‡¶∂</button>
        <button class="ir-tab" data-tab="updates" data-i18n="ir.updates">‡¶Ü‡¶™‡¶°‡ßá‡¶ü</button>
        <button class="ir-tab" data-tab="news" data-i18n="ir.news">‡¶®‡¶ø‡¶â‡¶ú</button>
      </div>
      <div class="ir-track-wrap">
        <div class="ir-track" id="irTrack"></div>
      </div>
    </div>
  </div>

  <!-- HERO BANNER -->
  <main class="container" id="home">
    <section class="slider glass" aria-label="Premium Banners">
      <button class="arrow prev" id="prevBtn" aria-label="Prev">
        <svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M15.41 7.41 14 6 8 12l6 6 1.41-1.41L10.83 12z"/></svg>
      </button>
      <button class="arrow next" id="nextBtn" aria-label="Next">
        <svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="m8.59 16.59 4.58-4.59-4.58-4.59L10 6l6 6-6 6z"/></svg>
      </button>
      <div class="slides" id="slides">
        <div class="slide">
          <img src="https://iili.io/Kl05eku.jpg?q=80&w=1400&auto=format&fit=crop" alt="Banner 1">
          <div class="s-overlay"></div>
          <div class="s-content">
            <div class="s-title">Bangladesh ‚Ä¢ Pakisthan</div>
            <div class="s-sub">‡¶Ü‡¶ú ‡¶∞‡¶æ‡¶§ ‡ß¶‡ßÆ:‡ß©‡ß¶</div>
            <div class="s-cta">
              <a class="cta primary" href="#channels">Explore Channels</a>
              <a class="cta" href="#events">Live Events</a>
            </div>
          </div>
        </div>
        <div class="slide">
          <img src="https://iili.io/KlGk4R9.jpg?q=80&w=1400&auto=format&fit=crop" alt="Banner 2">
          <div class="s-overlay"></div>
          <div class="s-content">
            <div class="s-title">Ken Burns ‚Ä¢ Parallax feel</div>
            <div class="s-sub">Designed for Mobile ‚Ä¢ Tablet ‚Ä¢ TV ‚Ä¢ PC</div>
            <div class="s-cta">
              <a class="cta primary" href="#channels">Start Watching</a>
              <a class="cta" href="#events">Schedule</a>
            </div>
          </div>
        </div>
        <div class="slide">
          <img src="https://iili.io/KlMxAAb.webp?q=80&w=1400&auto=format&fit=crop" alt="Banner 3">
          <div class="s-overlay"></div>
          <div class="s-content">
            <div class="s-title">Bangladesh ‚Ä¢ Cricket team</div>
            <div class="s-sub">Ultra-Smooth</div>
            <div class="s-cta">
              <a class="cta primary" href="#channels">Open Player</a>
              <a class="cta" href="#events">Explore</a>
            </div>
          </div>
        </div>
      </div>
      <div class="dots" id="dots"></div>
    </section>

    <!-- Channels -->
    <section class="glass section" id="channels">
      <div class="hrow">
        <div class="h1" data-i18n="channels.title">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ü‡¶ø‡¶≠‡¶ø ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡¶∏‡¶Æ‡ßÇ‡¶π</div>
        <div class="muted" data-i18n="channels.sub">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</div>
      </div>
      <div class="filter-bar" id="filterBar">
        <button class="chip active" data-filter="all" data-i18n="filter.all">‡¶∏‡¶¨</button>
        <button class="chip" data-filter="sports" data-i18n="filter.sports">‡¶∏‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶∏</button>
        <button class="chip" data-filter="Bangladesh News" data-i18n="filter.news">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßÄ ‡¶®‡¶ø‡¶â‡¶ú</button>
        <button class="chip" data-filter="news" data-i18n="filter.news">‡¶®‡¶ø‡¶â‡¶ú</button>
        <button class="chip" data-filter="movies" data-i18n="filter.movies">‡¶Æ‡ßÅ‡¶≠‡¶ø‡¶ú</button>
        <button class="chip" data-filter="kids" data-i18n="filter.kids">‡¶ï‡¶ø‡¶°‡¶∏</button>
        <button class="chip" data-filter="music" data-i18n="filter.music">‡¶Æ‡¶ø‡¶â‡¶ú‡¶ø‡¶ï</button>
        <button class="chip" data-filter="science" data-i18n="filter.science">‡¶∏‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶∏</button>
      </div>
      <div class="grid" id="channelGrid" aria-live="polite"></div>
    </section>

    <!-- Events -->
    <section class="glass section" id="events">
      <div class="hrow">
        <div class="h1" data-i18n="events.title">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∏</div>
        <div class="muted" data-i18n="events.sub">‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶Æ‡¶æ‡¶®‡ßá‡¶∞ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∏ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</div>
      </div>
      <div class="events" id="eventList"></div>
    </section>
  </main>

  <!-- Ribbon (Above Footer) -->
  <div class="ribbon glass container" role="region" aria-label="News Ribbon">
    <div class="rib-title" data-i18n="ribbon.title">‡¶®‡¶ø‡¶â‡¶ú ‚Ä¢ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü</div>
    <div class="rib-wrap">
      <div class="rib-track" id="ribTrack"></div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer glass container">
    <div class="hrow">
      <div>
        <div class="h1">ùïÉùïöùïßùïñ ùïäùï•ùï£ùïñùïíùïû</div>
        <div class="muted" data-i18n="footer.tag">‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ü‡¶ø‡¶≠‡¶ø‡¶∞ ‡¶∏‡ßç‡¶Æ‡ßÅ‡¶• ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ</div>
      </div>
      <div class="socials">
        <a href="#" target="_blank" rel="noopener">Telegram</a>
        <a href="#" target="_blank" rel="noopener">Facebook</a>
        <a href="#" target="_blank" rel="noopener">Twitter/X</a>
        <a href="#" target="_blank" rel="noopener">YouTube</a>
        <a href="#" target="_blank" rel="noopener">Website</a>
      </div>
    </div>
  </footer>

  <!-- PLAYER MODAL -->
  <div class="modal" id="playerModal" aria-hidden="true" role="dialog" aria-label="Player">
    <div class="modal-bg" id="closePlayer"></div>
    <div class="modal-body">
      <div class="player-wrap">
        <div id="spinner" class="spinner hidden"></div>
        <div id="toast" class="toast hidden">Playback error</div>
        <video id="video" autoplay playsinline preload="metadata"></video>

        <div class="player-ui">
          <div class="p-top">
            <div class="p-title">
              <span class="live-dot"></span>
              <span id="playerTitle">Live</span>
            </div>
            <div class="controls">
              <div class="quality-menu ctl" id="qualityMenu">
                <span data-i18n="player.quality">‡¶ï‡ßã‡ßü‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø</span>
                <svg width="14" height="14" viewBox="0 0 24 24"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
                <div class="q-list" id="qualityList"></div>
              </div>
              <button class="ctl" id="pipBtn" title="PiP">
                <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M19 7H5v10h14V7m-2 8h-6v-4h6v4Z"/></svg>
              </button>
              <button class="ctl" id="fsBtn" title="Fullscreen">
                <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M14,3H21V10H19V6.41L13.41,12L12,10.59L17.59,5H14V3M10,21H3V14H5V17.59L10.59,12L12,13.41L6.41,19H10V21Z"/></svg>
              </button>
              <button class="ctl" id="closeBtn" title="Close">
                <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12"/></svg>
              </button>
            </div>
          </div>

          <!-- Branding overlay -->
          <div class="p-brand" id="playerBrand" style="left:20px; top:50%; transform:translateY(-50%); display:flex; align-items:center; gap:12px; pointer-events:none; animation:brandIntro 1.2s ease both">
            <div class="plogo" style="position:relative; width:58px; height:58px; border-radius:50%">
              <img src="https://avatars.githubusercontent.com/u/192325222?v=4" alt="Brand" style="width:58px; height:58px; border-radius:50%; box-shadow:0 10px 24px rgba(0,0,0,.4)">
            </div>
            <div class="t" style="font-weight:900; font-size:22px; letter-spacing:.3px; background:linear-gradient(90deg, #fff, var(--brand), var(--brand2), #fff); -webkit-background-clip:text; background-clip:text; color:transparent; background-size:200% 100%; text-shadow:0 2px 18px rgba(107,231,255,.28); animation:textShimmer 6s linear infinite">ùïÉùïöùïßùïñ ùïäùï•ùï£ùïñùïíùïû</div>
          </div>

          <div class="p-bottom">
            <div class="controls">
              <button class="ctl" id="playBtn" title="Play/Pause">
                <svg id="playIcon" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
                <svg id="pauseIcon" width="16" height="16" viewBox="0 0 24 24" style="display:none"><path fill="currentColor" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
              </button>
              <button class="ctl" id="rewBtn" title="Back 10s">
                <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M11 7V3L6 8l5 5V9a4 4 0 1 1-4 4H5a6 6 0 1 0 6-6Z"/></svg>
              </button>
              <button class="ctl" id="fwdBtn" title="Forward 10s">
                <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M13 7V3l5 5-5 5V9a4 4 0 1 0 4 4h2a6 6 0 1 1-6-6Z"/></svg>
              </button>
              <button class="ctl" id="muteBtn" title="Mute/Unmute">
                <svg id="volIcon" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M14,3.23v17.53L7.77,16H3V8h4.77L14,3.23Z"/></svg>
                <svg id="muteIcon" width="16" height="16" viewBox="0 0 24 24" style="display:none"><path fill="currentColor" d="M12,4L9.91,6.09L12,8.18V4M4.27,3L3,4.27L7.73,9H3V15H7L12,20V13.27L16.25,17.5C15.04,18.5 13.57,19.19 12,19.45V21C14.39,20.68 16.5,19.5 18.07,17.77L19.73,19.43L21,18.16L4.27,3M19,12C19,10.81 18.67,9.69 18.09,8.73L19.57,7.25C20.5,8.79 21,10.54 21,12C21,13.46 20.5,15.21 19.57,16.75L18.09,15.27C18.67,14.31 19,13.19 19,12M16.5,12C16.5,11.25 16.3,10.54 15.96,9.93L17.45,8.45C18.13,9.56 18.5,10.76 18.5,12C18.5,13.24 18.13,14.44 17.45,15.55L15.96,14.07C16.3,13.46 16.5,12.75 16.5,12Z"/></svg>
              </button>
              <input class="vol" id="vol" type="range" min="0" max="1" step="0.02" value="1" title="Volume" />
            </div>

            <div class="progress">
              <span class="time" id="curTime">00:00</span>
              <input class="bar" id="seek" type="range" min="0" max="100" step="0.1" value="0" />
              <span class="time" id="durTime">LIVE</span>
            </div>

            <div class="controls">
              <div class="quality-menu ctl" id="qualityMenu2">
                <span data-i18n="player.quality">‡¶ï‡ßã‡ßü‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø</span>
                <svg width="14" height="14" viewBox="0 0 24 24"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
                <div class="q-list" id="qualityList2"></div>
              </div>
            </div>
          </div>
        </div> <!-- player-ui -->
      </div>
    </div>
  </div>

  <!-- AUTH MODAL -->
  <div class="modal auth-modal" id="authModal" aria-hidden="true" role="dialog" aria-label="Auth">
    <div class="modal-bg" id="authClose"></div>
    <div class="modal-body glass" style="width:min(520px,94vw)">
      <div class="section">
        <h3 data-i18n="auth.title" style="margin:8px 0 14px">‡¶≤‡¶ó-‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
        <div style="display:flex;flex-direction:column;gap:10px">
          <label class="pill-btn" style="display:flex;align-items:center;gap:8px">
            <span>üë§</span><input id="username" placeholder="Username" autocomplete="username" style="all:unset;flex:1" />
          </label>
          <label class="pill-btn" style="display:flex;align-items:center;gap:8px">
            <span>üîí</span><input id="password" type="password" placeholder="Password" autocomplete="current-password" style="all:unset;flex:1" />
          </label>
          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap">
            <div class="muted" style="font-size:12px" data-i18n="auth.info">‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶õ‡¶æ‡ßú‡¶æ ‡¶∏‡¶æ‡¶á‡¶®-‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§</div>
            <button class="pill-btn" id="demoBtn">Demo</button>
          </div>
          <button class="pill-btn login-btn" id="loginBtn" data-i18n="auth.login">‡¶≤‡¶ó-‡¶á‡¶®</button>
        </div>
      </div>
    </div>
  </div>

  <!-- HLS.js -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.8/dist/hls.min.js"></script>
  <script>
  ;(()=>{
    /* =========================
       CONFIG / DATA
       ========================= */
    const ACCOUNTS = [
      { user:'basic', pass:'basic123', tier:'basic',  expires:'2027-12-31', label:'B'    },
      { user:'pro',   pass:'pro123',   tier:'pro',    expires:'2027-12-31', label:'Pro'  },
      { user:'ultra', pass:'ultra999', tier:'ultra',  expires:'2027-12-31', label:'Pro+' }
    ];

    const CHANNELS = [
      { id:'ATN-News', name:'ATN-News', category:'Bangladesh News',  logo:'https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/ATN_News_logo.svg/180px-ATN_News_logo.svg.png', url:'https://owrcovcrpy.gpcdn.net/bpk-tv/1706/output/1706-audio_113362_eng=113200-video=3224800.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'Somoay-TV', name:'Somoay-TV', category:'Bangladesh News',  logo:'https://upload.wikimedia.org/wikipedia/en/thumb/c/c4/SOMOY_TV_Logo.svg/250px-SOMOY_TV_Logo.svg.png', url:'https://owrcovcrpy.gpcdn.net/bpk-tv/1702/output/1702-audio_113322_eng=113200-video=3224800.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'DBC-News', name:'DBC-News', category:'Bangladesh News',  logo:'https://upload.wikimedia.org/wikipedia/commons/9/9f/DBC_News_logo.png', url:'https://bozztv.com/rongo/rongo-dbcnews/tracks-v2a1/mono.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'Channel-24', name:'Channel-24', category:'Bangladesh News',  logo:'https://images.seeklogo.com/logo-png/42/1/channel-24-logo-png_seeklogo-424910.png', url:'https://owrcovcrpy.gpcdn.net/bpk-tv/1703/output/1703-audio_113332_eng=113200-video=3224800.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'Ekattor-TV', name:'Ekattor-TV', category:'Bangladesh News',  logo:'https://upload.wikimedia.org/wikipedia/bn/thumb/4/4a/%E0%A6%8F%E0%A6%95%E0%A6%BE%E0%A6%A4%E0%A7%8D%E0%A6%A4%E0%A6%B0_%E0%A6%9F%E0%A6%BF%E0%A6%AD%E0%A6%BF.svg/316px-%E0%A6%8F%E0%A6%95%E0%A6%BE%E0%A6%A4%E0%A7%8D%E0%A6%A4%E0%A6%B0_%E0%A6%9F%E0%A6%BF%E0%A6%AD%E0%A6%BF.svg.png', url:'https://owrcovcrpy.gpcdn.net/bpk-tv/1705/output/1705-audio_113352_eng=113200-video=3224800.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'Ekhon-TV', name:'Ekhon-TV', category:'Bangladesh News',  logo:'https://ekhon.tv/logo.png', url:'https://app24.jagobd.com.bd/c3VydmVyX8RpbEU9Mi8xNy8yMFDDEHGcfRgzQ6NTAgdEoaeFzbF92YWxIZTO0U0ezN1IzMyfvcEdsEfeDeKiNkVN3PTOmdFsaWRtaW51aiPhnPTI2/globaltv.stream/tracks-v1a1/mono.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'Independent-TV', name:'Independent-TV', category:'Bangladesh News',  logo:'https://upload.wikimedia.org/wikipedia/en/thumb/c/c1/Independent_Television_Logo.svg/250px-Independent_Television_Logo.svg.png', url:'https://owrcovcrpy.gpcdn.net/bpk-tv/1704/output/1704-audio_113342_eng=113200-video=3224800.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'Jamuna-TV', name:'Jamuna-TV', category:'Bangladesh News',  logo:'https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Jamuna_TV_logo.svg/512px-Jamuna_TV_logo.svg.png', url:'https://owrcovcrpy.gpcdn.net/bpk-tv/1701/output/1701-audio_113312_eng=113200-video=3224800.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      { id:'News-24', name:'News-24', category:'Bangladesh News',  logo:'https://iili.io/KlEdw57.png', url:'https://app24.jagobd.com.bd/c3VydmVyX8RpbEU9Mi8xNy8yMFDDEHGcfRgzQ6NTAgdEoaeFzbF92YWxIZTO0U0ezN1IzMyfvcEdsEfeDeKiNkVN3PTOmdFsaWRtaW51aiPhnPTI2/news24local.stream/tracks-v1a1/mono.m3u8', badges:['Live','HD','Free','Pro'], tier:'basic' },
      
      
      { id:'B4U-Kadak', name:'B4U-Kadak', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/B4U_Kadak.png', url:'https://cdnb4u.wiseplayout.com/B4U_Kadak/HD720/HD720.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'B4U-Muvies', name:'B4U-Muvies', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/b4u_movies.png', url:'https://live.dinesh29.com.np/stream/jiotv/b4umovies/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Colors-Cineplex', name:'Colors-Cineplex', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Colors_Cineplex.png', url:'https://live.dinesh29.com.np/stream/jiotv/colorscineplex/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Colors Cineplex HD', name:'Colors Cineplex HD', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Color_Cineplex_HD.png', url:'https://live.dinesh29.com.np/stream/jiotv/colorscineplexhd/master.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Colors Cineplex Superhit', name:'Colors Cineplex Superhit', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Rishtey_Cineplex.png', url:'https://live.dinesh29.com.np/stream/jiotv/colorscineplexsuperhit/master.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Colors Gujarati Cinema', name:'Sintel 4K', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Colors_Gujarati_Cinema.png', url:'https://live.dinesh29.com.np/stream/jiotv/colorsgujaraticinema/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Colors Bangla Cinema', name:'Colors Bangla Cinema', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Colors_Bangla_Cinema.png', url:'https://live.dinesh29.com.np/stream/jiotv/colorsbanglacinema/master.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Bhojpuri Cinema', name:'Bhojpuri Cinema', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Bhojpuri_Cinema.png', url:'https://live.dinesh29.com.np/stream/jiotv/bhojpuricinema/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Wow Cinema One', name:'Wow Cinema One', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Wow_Cinema_One.png', url:'https://live.dinesh29.com.np/stream/jiotv/wowcinemaone/master.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Tara TV', name:'Tara TV', category:'movies', logo:'https://jiotvimages.cdn.jio.com/dare_images/images/Tara_TV.png', url:'https://live.dinesh29.com.np/stream/jiotv/taratv/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      
      { id:'Nick-Hindi', name:'Nick-Hindi', category:'kids',   logo:'https://live.dinesh29.com.np/logos/jiotv/nickhindi.png', url:'https://live.dinesh29.com.np/stream/jiotv/nickhindi/stream_0.m3u8', badges:['HD','Free','B'], tier:'basic' },
      
      
      { id:'B4U-Music', name:'B4U Music',   category:'music', logo:'	https://live.dinesh29.com.np/logos/jiotv/b4umusic.png', url:'https://live.dinesh29.com.np/stream/jiotv/b4umusic/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'Saregama-Music', name:'Saregama-Music',   category:'music', logo:'	https://live.dinesh29.com.np/logos/jiotv/saregamamusic.png', url:'https://live.dinesh29.com.np/stream/jiotv/saregamamusic/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      { id:'YRF-Music', name:'YRF-Music',   category:'music', logo:'	https://live.dinesh29.com.np/logos/jiotv/yrfmusic.png', url:'https://live.dinesh29.com.np/stream/jiotv/yrfmusic/stream_0.m3u8', badges:['Live','HD','Pro'], tier:'pro' },
      
      { id:'Discovery-Bangla', name:'Discovery-Bangla', category:'science', logo:'https://live.dinesh29.com.np/logos/jiotv/discoverybengali.png', url:'https://live.dinesh29.com.np/stream/jiotv/discoverybengali/stream_0.m3u8', badges:['Live','8k','Pro+'], tier:'ultra' },
      { id:'Discovery-Hindi', name:'Discovery-Hindi', category:'science', logo:'https://live.dinesh29.com.np/logos/jiotv/discoveryhindi.png', url:'https://live.dinesh29.com.np/stream/jiotv/discoveryhindi/stream_0.m3u8', badges:['Live','8k','Pro+'], tier:'ultra' },
      { id:'History-Hindi', name:'History-Hindi', category:'science', logo:'https://live.dinesh29.com.np/logos/jiotv/historytv18hdhindi.png', url:'https://live.dinesh29.com.np/stream/jiotv/historytv18hdhindi/stream_0.m3u8', badges:['Live','8k','Pro+'], tier:'ultra' },
      
      
      { id:'Star-Sports-2 Hindi', name:'Star-Sports-2 Hindi', category:'sports', logo:'	https://live.dinesh29.com.np/logos/jiotv/starsports2hindihd.png', url:'https://live.dinesh29.com.np/stream/jiotv/starsports2hindihd/stream_0.m3u8', badges:['Live','2k','Pro'], tier:'pro' },
      { id:'Star-Sports-Khel', name:'Star-Sports-Khel', category:'sports', logo:'		https://live.dinesh29.com.np/logos/jiotv/starsportskhel.png', url:'https://live.dinesh29.com.np/stream/jiotv/starsportskhel/stream_0.m3u8', badges:['Live','2k','Pro'], tier:'pro' },
      { id:'Star-Sports-2 Hindi', name:'Star-Sports-2 Hindi', category:'sports', logo:'	https://live.dinesh29.com.np/logos/jiotv/starsports2hindihd.png', url:'https://live.dinesh29.com.np/stream/jiotv/starsports2hindihd/stream_0.m3u8?uid=1902145411', badges:['Live','2k','Pro'], tier:'pro' },
      
      
    ];

    const EVENTS = [
      { time:'Tonight 20:30', title:'Cricket: Bangladesh vs Pakisthan', tag:'Live Soon', img:'https://iili.io/KlGk4R9.jpg?q=80&w=600&auto=format&fit=crop' },
      { time:'Thu 21:00', title:'SpaceX Launch (Demo feed)', tag:'Premiere', img:'https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?q=80&w=600&auto=format&fit=crop' },
      { time:'Fri 20:15', title:'Football', tag:'Live', img:'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?q=80&w=600&auto=format&fit=crop' }
    ];

    const TICKERS = {
      notice: [
        { bn:'‡¶Ü‡¶ú ‡ßß‡ß®‡¶ü‡¶æ-‡ßß‡¶ü‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶á‡¶®‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏', en:'Server maintenance 12‚Äì1 AM today', icon:'‚ö†Ô∏è', type:'notice' },
        { bn:'‡¶≤‡¶ó-‡¶á‡¶® ‡¶õ‡¶æ‡ßú‡¶æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ï‡¶° (‡¶ü‡¶æ‡ßü‡¶æ‡¶∞-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï)', en:'Tier-based access; login required', icon:'üîí', type:'notice' }
      ],
      updates: [
        { bn:'‡¶®‡¶§‡ßÅ‡¶® 8K ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ (Pro+)', en:'Added new 8K channels (Pro+)', icon:'‚ú®', type:'update' },
        { bn:'PiP ‡¶ì Quality switch ‡¶â‡¶®‡ßç‡¶®‡¶§', en:'Improved PiP and quality switch', icon:'üéõÔ∏è', type:'update' }
      ],
      news: [
        { bn:'‡¶≤‡¶æ‡¶á‡¶≠: ‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï ‡¶´‡ßÅ‡¶ü‡¶¨‡¶≤ ‡¶ü‡ßÅ‡¶∞‡ßç‡¶®‡¶æ‡¶Æ‡ßá‡¶®‡ßç‡¶ü', en:'Live: International football tournament', icon:'üèÜ', type:'news' },
        { bn:'‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßÅ‡¶≠‡¶ø‡¶ú ‚Äî HD/4K', en:'New movies ‚Äî HD/4K', icon:'üé¨', type:'news' }
      ]
    };

    const RIBBON = [
      { img:'https://images.unsplash.com/photo-1461896836934-ffe607ba8211?q=80&w=600&auto=format&fit=crop', bn:'‡¶¨‡ßç‡¶∞‡ßá‡¶ï‡¶ø‡¶Ç: ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶®‡ßã‡¶° ‡¶≤‡¶æ‡¶á‡¶≠', en:'Breaking: New server node live', type:'update' },
      { img:'https://images.unsplash.com/photo-1517649763962-0c623066013b?q=80&w=600&auto=format&fit=crop', bn:'‡¶≤‡¶æ‡¶á‡¶≠ ‡¶Æ‡¶ø‡¶â‡¶ú‡¶ø‡¶ï ‡¶´‡ßá‡¶∏‡ßç‡¶ü (HD)', en:'Live Music Fest (HD)', type:'news' },
      { img:'https://images.unsplash.com/photo-1521417531039-94d3c6a86b45?q=80&w=600&auto=format&fit=crop', bn:'‡¶´‡ßÅ‡¶ü‡¶¨‡¶≤: ‡¶´‡¶æ‡¶á‡¶®‡¶æ‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö ‡¶Ü‡¶ú', en:'Football: Final today', type:'news' }
    ];

    const i18n = {
      bn:{
        'nav.home':'‡¶π‡ßã‡¶Æ','nav.channels':'‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤','nav.events':'‡¶≤‡¶æ‡¶á‡¶≠ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü',
        'nav.site1':'‡¶Ö‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶á‡¶ü ‡ßß','nav.site2':'‡¶Ö‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶á‡¶ü ‡ß®',
        'channels.title':'‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ü‡¶ø‡¶≠‡¶ø ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡¶∏‡¶Æ‡ßÇ‡¶π','channels.sub':'‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®',
        'filter.all':'‡¶∏‡¶¨','filter.sports':'‡¶∏‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶∏','filter.news':'‡¶®‡¶ø‡¶â‡¶ú','filter.movies':'‡¶Æ‡ßÅ‡¶≠‡¶ø‡¶ú','filter.kids':'‡¶ï‡¶ø‡¶°‡¶∏','filter.music':'‡¶Æ‡¶ø‡¶â‡¶ú‡¶ø‡¶ï','filter.science':'‡¶∏‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶∏',
        'events.title':'‡¶≤‡¶æ‡¶á‡¶≠ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∏','events.sub':'‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶Æ‡¶æ‡¶®‡ßá‡¶∞ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∏ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ',
        'footer.tag':'‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ü‡¶ø‡¶≠‡¶ø‡¶∞ ‡¶∏‡ßç‡¶Æ‡ßÅ‡¶• ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ',
        'auth.title':'‡¶≤‡¶ó-‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®','auth.login':'‡¶≤‡¶ó-‡¶á‡¶®','auth.logout':'‡¶≤‡¶ó-‡¶Ü‡¶â‡¶ü','auth.info':'‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶õ‡¶æ‡ßú‡¶æ ‡¶∏‡¶æ‡¶á‡¶®-‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§',
        'player.close':'‡¶¨‡¶®‡ßç‡¶ß','player.fullscreen':'‡¶´‡ßÅ‡¶≤-‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®','player.quality':'‡¶ï‡ßã‡ßü‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø',
        'ir.notice':'‡¶®‡ßã‡¶ü‡¶ø‡¶∂','ir.updates':'‡¶Ü‡¶™‡¶°‡ßá‡¶ü','ir.news':'‡¶®‡¶ø‡¶â‡¶ú',
        'ribbon.title':'‡¶®‡¶ø‡¶â‡¶ú ‚Ä¢ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü'
      },
      en:{
        'nav.home':'Home','nav.channels':'Channels','nav.events':'Live Events',
        'nav.site1':'Other Site 1','nav.site2':'Other Site 2',
        'channels.title':'Live TV Channels','channels.sub':'Select a category',
        'filter.all':'All','filter.sports':'Sports','filter.news':'News','filter.movies':'Movies','filter.kids':'Kids','filter.music':'Music','filter.science':'Science',
        'events.title':'Live Events','events.sub':'World-class events',
        'footer.tag':'Smooth premium live TV experience',
        'auth.title':'Sign in','auth.login':'Sign in','auth.logout':'Log out','auth.info':'Only approved accounts can sign in.',
        'player.close':'Close','player.fullscreen':'Fullscreen','player.quality':'Quality',
        'ir.notice':'Notice','ir.updates':'Updates','ir.news':'News',
        'ribbon.title':'News ‚Ä¢ Updates'
      }
    };

    /* =========================
       STATE / UTILS
       ========================= */
    let lang = localStorage.getItem('lang') || 'bn';
    let user = null, hls = null, currentChannel = null;
    let sliderIndex = 0, sliderTimer = null;

    const $ = s=>document.querySelector(s);
    const $$ = s=>document.querySelectorAll(s);

    function t(k){ const d=i18n[lang]||i18n.bn; return d[k]||k; }
    function applyI18n(){
      $$('[data-i18n]').forEach(el=>{ const k=el.getAttribute('data-i18n'); el.textContent=t(k); });
      $('#langBtn').textContent = lang==='bn' ? '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ' : 'English';
      renderInfoRail(currentTab); renderRibbon(); updateAuthUI(); computeActionsWidth();
    }
    function formatDate(d){ return new Date(d).toLocaleDateString(lang==='bn'?'bn-BD':'en-US',{year:'numeric',month:'short',day:'2-digit'}); }
    function isExpired(s){ return new Date() > new Date(s+'T23:59:59'); }
    function canWatch(tier){ if(!user) return false; if(user.tier==='ultra') return true; if(user.tier==='pro') return tier!=='ultra'; return tier==='basic'; }

    // Script-protect (light)
    document.addEventListener('contextmenu', e=>e.preventDefault());
    document.addEventListener('keydown', e=>{
      if((e.ctrlKey && e.key.toLowerCase()==='u') || e.key==='F12' || (e.ctrlKey&&e.shiftKey&&['I','J','C'].includes(e.key.toUpperCase()))) e.preventDefault();
    });

    // Throttle helper
    function throttle(fn, ms){ let t=null; return (...a)=>{ if(t) return; t=setTimeout(()=>{ fn(...a); t=null; }, ms); }; }

    /* =========================
       NAV: stable actions width
       ========================= */
    function computeActionsWidth(){
      const login = $('#loginOpen'); const prof = $('#profile');
      if(!login || !prof) return;
      const wasLoginHidden = login.classList.contains('hidden');
      const prevProfDisplay = prof.style.display;

      login.classList.remove('hidden');
      prof.style.display = 'flex';

      const w = Math.max(login.getBoundingClientRect().width, prof.getBoundingClientRect().width) + 24;
      if(wasLoginHidden) login.classList.add('hidden');
      prof.style.display = prevProfDisplay || 'none';

      const finalW = Math.min(Math.max(280, Math.ceil(w)), 460);
      document.documentElement.style.setProperty('--actions-w', finalW + 'px');
    }
    window.addEventListener('resize', throttle(computeActionsWidth, 150));
    window.addEventListener('load', ()=>setTimeout(computeActionsWidth, 60));

    /* =========================
       Info Rail
       ========================= */
    let currentTab='notice';
    function railData(tab){
      const list=TICKERS[tab]||[];
      return list.map(x=>({text:lang==='bn'?x.bn:x.en, icon:x.icon, type:x.type, tag:tab==='notice'?(lang==='bn'?'‡¶®‡ßã‡¶ü‡¶ø‡¶∂':'Notice'):tab==='updates'?(lang==='bn'?'‡¶Ü‡¶™‡¶°‡ßá‡¶ü':'Update'):(lang==='bn'?'‡¶®‡¶ø‡¶â‡¶ú':'News') }));
    }
    function renderInfoRail(tab='notice'){
      currentTab=tab;
      $$('.ir-tab').forEach(b=>b.classList.toggle('active', b.dataset.tab===tab));
      const track=$('#irTrack');
      const row=railData(tab).concat(railData(tab));
      track.innerHTML=row.map(x=>`<div class="ir-item"><span>${x.icon}</span><span class="ir-tag ${x.type==='updates'?'up':x.type==='news'?'news':''}">${x.tag}</span><span>${x.text}</span></div>`).join('');
    }
    $('.info-rail').addEventListener('click',e=>{const btn=e.target.closest('.ir-tab'); if(btn) renderInfoRail(btn.dataset.tab);});

    /* =========================
       HERO Slider
       ========================= */
    function initSlider(){
      const slides=$('#slides'), dots=$('#dots'), count=slides.children.length;
      dots.innerHTML=''; for(let i=0;i<count;i++){const b=document.createElement('button'); b.className='dot'+(i===0?' active':''); b.addEventListener('click',()=>go(i)); dots.appendChild(b);}
      $('#prevBtn').addEventListener('click',()=>go((sliderIndex-1+count)%count));
      $('#nextBtn').addEventListener('click',()=>go((sliderIndex+1)%count));
      function go(i){ sliderIndex=i; slides.style.transform=`translateX(-${i*100}%)`; [...dots.children].forEach((d,idx)=>d.classList.toggle('active', idx===i)); restart(); }
      function next(){ go((sliderIndex+1)%count); }
      function restart(){ if(sliderTimer) clearInterval(sliderTimer); sliderTimer=setInterval(next, 7000); }
      restart();
    }

    /* =========================
       Channels
       ========================= */
    function renderChannels(filter='all'){
      const g=$('#channelGrid'); g.innerHTML='';
      CHANNELS.filter(c=>filter==='all'||c.category===filter).forEach(ch=>{
        const el=document.createElement('div'); el.className='card'; el.tabIndex=0;
        el.innerHTML=`<div class="thumb"><div class="logo-frame">
            <img src="${ch.logo}" alt="${ch.name} logo" loading="lazy"
                 onerror="this.src='data:image/svg+xml;utf8,<?xml version=&quot;1.0&quot;?><svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;300&quot; height=&quot;170&quot;><rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;%23000&quot;/><text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; fill=&quot;%23aaa&quot; font-family=&quot;Arial&quot; font-size=&quot;18&quot;>No Logo</text></svg>';">
          </div></div>
          <div class="meta">
            <div><div class="title">${ch.name}</div><div class="muted" style="font-size:12px;text-transform:capitalize">${ch.category}</div></div>
            <div class="badges">${badges(ch)}</div>
          </div>`;
        el.addEventListener('click',()=>openChannel(ch));
        el.addEventListener('keydown',e=>{ if(e.key==='Enter') openChannel(ch);});
        g.appendChild(el);
      });
    }
    function badges(ch){ const m={'Live':'b-live','HD':'b-hd','Free':'b-free','Pro':'b-pro','Pro+':'b-pro','B':'b-B','2k':'b-2k','4k':'b-4k','8k':'b-8k'}; return ch.badges.map(b=>`<span class="badge ${m[b]||''}">${b}</span>`).join(''); }
    $('#filterBar').addEventListener('click',e=>{const btn=e.target.closest('.chip'); if(!btn) return; $$('#filterBar .chip').forEach(x=>x.classList.remove('active')); btn.classList.add('active'); renderChannels(btn.dataset.filter);});

    /* =========================
       Events
       ========================= */
    function renderEvents(){
      const p=$('#eventList'); p.innerHTML='';
      EVENTS.forEach(ev=>{
        const el=document.createElement('div'); el.className='event';
        el.innerHTML=`<div class="ev-left"><img src="${ev.img}" alt="event"></div><div class="ev-mid"><div class="ev-title">${ev.title}</div><div class="ev-sub">Global ‚Ä¢ Premium</div></div><div class="ev-right"><div class="etime">${ev.time}</div><div class="etag">${ev.tag}</div></div>`;
        p.appendChild(el);
      });
    }

    /* =========================
       Ribbon
       ========================= */
    function renderRibbon(){
      const w=$('#ribTrack');
      const items=RIBBON.map(i=>({img:i.img,title:lang==='bn'?i.bn:i.en,type:i.type}));
      const row=items.concat(items);
      w.innerHTML=row.map(i=>`<div class="rib-card"><div class="rib-img"><img src="${i.img}" alt="thumb"></div><div class="rib-meta"><span class="rib-tag ${i.type}">${i.type==='update'?(lang==='bn'?'‡¶Ü‡¶™‡¶°‡ßá‡¶ü':'Update'):lang==='bn'?'‡¶®‡¶ø‡¶â‡¶ú':'News'}</span><div class="title" style="font-size:14px">${i.title}</div></div></div>`).join('');
    }

    /* =========================
       Auth
       ========================= */
    const loginOpen=$('#loginOpen'), authModal=$('#authModal'), authClose=$('#authClose'), loginBtn=$('#loginBtn');
    const demoBtn=$('#demoBtn'), logoutBtn=$('#logoutBtn'), profile=$('#profile');
    const uname=$('#username'), upass=$('#password'); const pname=$('#pname'), pexp=$('#pexp'), prole=$('#prole');

    function showAuth(v){ authModal.classList.toggle('active', v); }
    loginOpen.addEventListener('click',()=>showAuth(true));
    authClose.addEventListener('click',()=>showAuth(false));
    demoBtn.addEventListener('click',()=>{uname.value='pro'; upass.value='pro123';});
    loginBtn.addEventListener('click',doLogin); upass.addEventListener('keydown',e=>{ if(e.key==='Enter') doLogin(); });

    function doLogin(){
      const u=(uname.value||'').trim().toLowerCase(), p=(upass.value||'').trim();
      const rec=ACCOUNTS.find(a=>a.user===u && a.pass===p);
      if(!rec) return alert(lang==='bn'?'‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ/‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°':'Invalid username/password');
      if(isExpired(rec.expires)) return alert(lang==='bn'?'‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡ßá‡ßü‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑':'Account expired');
      user={user:rec.user,tier:rec.tier,label:rec.label,expDate:rec.expires};
      sessionStorage.setItem('auth',JSON.stringify(user)); updateAuthUI(); showAuth(false);
    }
    function doLogout(){ user=null; sessionStorage.removeItem('auth'); updateAuthUI(); }
    logoutBtn.addEventListener('click',doLogout);

    function updateAuthUI(){
      if(user){
        loginOpen.classList.add('hidden'); profile.style.display='flex';
        pname.textContent=user.user.toUpperCase(); pexp.textContent=(lang==='bn'?'‡¶Æ‡ßá‡ßü‡¶æ‡¶¶: ':'Expires: ')+formatDate(user.expDate);
        prole.textContent=user.label; prole.className='role '+(user.label==='B'?'B':user.label==='Pro'?'Pro':'ProPlus');
      }else{
        loginOpen.classList.remove('hidden'); profile.style.display='none';
      }
      renderChannels($('#filterBar .chip.active').dataset.filter);
      computeActionsWidth();
    }
    const saved=sessionStorage.getItem('auth'); if(saved){ try{ const o=JSON.parse(saved); if(!isExpired(o.expDate)) user=o; }catch{} } updateAuthUI();

    /* =========================
       Player (HLS + Custom Controls)
       ========================= */
    const playerModal=$('#playerModal'), video=$('#video'), spinner=$('#spinner'), toast=$('#toast');
    const closePlayer=$('#closePlayer'), closeBtn=$('#closeBtn');
    const pipBtn=$('#pipBtn'), fsBtn=$('#fsBtn');
    const qualityMenu=$('#qualityMenu'), qualityList=$('#qualityList');
    const qualityMenu2=$('#qualityMenu2'), qualityList2=$('#qualityList2');
    const playerTitle=$('#playerTitle');
    const playBtn=$('#playBtn'), playIcon=$('#playIcon'), pauseIcon=$('#pauseIcon');
    const muteBtn=$('#muteBtn'), volIcon=$('#volIcon'), muteIcon=$('#muteIcon'), vol=$('#vol');
    const rewBtn=$('#rewBtn'), fwdBtn=$('#fwdBtn');
    const seek=$('#seek'), curTime=$('#curTime'), durTime=$('#durTime');

    function showSpinner(v){ spinner.classList.toggle('hidden', !v); }
    function showToast(msg){ toast.textContent=msg; toast.classList.remove('hidden'); setTimeout(()=>toast.classList.add('hidden'), 2400); }

    closePlayer.addEventListener('click', hidePlayer); closeBtn.addEventListener('click', hidePlayer);
    function hidePlayer(){ try{ video.pause(); }catch{} if(hls){ hls.destroy(); hls=null; } playerModal.classList.remove('active'); playerModal.setAttribute('aria-hidden','true'); currentChannel=null; }

    async function openChannel(ch){
      if(!user) return alert(lang==='bn'?'‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶ó‡ßá ‡¶≤‡¶ó-‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®':'Please login first');
      if(!canWatch(ch.tier)) return alert(lang==='bn'?'‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡¶æ‡ßü‡¶æ‡¶∞‡ßá ‡¶è‡¶á ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ï‡¶°':'This channel is locked for your tier');
      currentChannel=ch; playerTitle.textContent=ch.name;
      const brand=$('#playerBrand'); brand.style.animation='none'; void brand.offsetWidth; brand.style.animation='brandIntro 1.2s ease both';
      playerModal.classList.add('active'); playerModal.setAttribute('aria-hidden','false');
      setupPlayer(ch.url);
    }
    window.openChannel = (ch)=>openChannel(ch); // safe expose if needed

    function setupPlayer(url){
      [qualityList, qualityList2].forEach(el=>el.innerHTML=''); [qualityMenu, qualityMenu2].forEach(el=>el.classList.remove('open'));
      if(hls){ try{ hls.destroy(); }catch{} hls=null; } video.src=''; video.controls=false;
      seek.value=0; curTime.textContent='00:00'; durTime.textContent='LIVE'; showSpinner(true);

      const isHls = url.includes('.m3u8') || url.includes('.php') || url.includes('.m3u');
      if(isHls && Hls.isSupported()){
        hls=new Hls({ maxBufferLength:30, capLevelToPlayerSize:true, enableWorker:true });
        hls.loadSource(url); hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, ()=>{ buildQuality(hls.levels); video.play().catch(()=>{}); });
        hls.on(Hls.Events.ERROR,(_,data)=>{ if(data?.fatal) showToast('Stream error'); });
      }else if(video.canPlayType('application/vnd.apple.mpegurl') && isHls){
        video.src=url; video.addEventListener('loadedmetadata',()=>video.play().catch(()=>{}),{once:true});
        buildQuality([]); // Auto only
      }else{
        video.src=url; video.play().catch(()=>{}); buildQuality([]); // Direct
      }
    }

    function buildQuality(levels){
      const opts=[{label:'Auto',level:-1}]; const seen=new Set();
      if(levels && levels.length){
        levels.slice().sort((a,b)=>b.height-a.height).forEach(lv=>{ if(!seen.has(lv.height)){ seen.add(lv.height); opts.push({label:lv.height+'p', level:levels.indexOf(lv)}); }});
      }
      [qualityList, qualityList2].forEach(list=>{
        list.innerHTML='';
        opts.forEach(opt=>{
          const b=document.createElement('button'); b.className='ctl'; b.textContent=opt.label;
          b.addEventListener('click',()=>{ if(hls) hls.currentLevel=opt.level; list.parentElement.classList.remove('open'); });
          list.appendChild(b);
        });
      });
      [qualityMenu, qualityMenu2].forEach(menu=>{
        menu.onclick=e=>{ e.stopPropagation(); menu.classList.toggle('open'); };
      });
      document.addEventListener('click',()=>{ qualityMenu.classList.remove('open'); qualityMenu2.classList.remove('open'); },{once:true});
    }

    // Video events
    video.addEventListener('playing', ()=>showSpinner(false));
    video.addEventListener('waiting', ()=>showSpinner(true));
    video.addEventListener('pause', ()=>{ showSpinner(false); updatePlayIcons(); });
    video.addEventListener('play', ()=>{ updatePlayIcons(); });
    video.addEventListener('loadedmetadata', ()=>{
      showSpinner(false);
      if(isFinite(video.duration)){ durTime.textContent=fmt(video.duration); }
    });
    video.addEventListener('timeupdate', ()=>{
      if(isFinite(video.duration) && video.duration>0){
        seek.value = (video.currentTime/video.duration)*100;
        curTime.textContent=fmt(video.currentTime);
        durTime.textContent=fmt(video.duration);
      }else{
        curTime.textContent='LIVE'; durTime.textContent='LIVE'; seek.value=0;
      }
    });
    video.addEventListener('error', ()=>{ showSpinner(false); showToast('Playback error'); });

    // Controls
    function updatePlayIcons(){ const playing = !video.paused && !video.ended; playIcon.style.display = playing ? 'none':'inline'; pauseIcon.style.display = playing ? 'inline':'none'; }
    playBtn.addEventListener('click', ()=>{ if(video.paused) video.play().catch(()=>{}); else video.pause(); updatePlayIcons(); });
    rewBtn.addEventListener('click', ()=>{ try{ video.currentTime = Math.max(0, video.currentTime-10); }catch{} });
    fwdBtn.addEventListener('click', ()=>{ try{ video.currentTime = isFinite(video.duration)? Math.min(video.duration, video.currentTime+10) : video.currentTime+10; }catch{} });
    muteBtn.addEventListener('click', ()=>{ video.muted=!video.muted; volIcon.style.display = video.muted?'none':'inline'; muteIcon.style.display = video.muted?'inline':'none'; });
    vol.addEventListener('input', ()=>{ video.volume=parseFloat(vol.value); video.muted = video.volume===0; volIcon.style.display = video.muted?'none':'inline'; muteIcon.style.display = video.muted?'inline':'none'; });
    seek.addEventListener('input', ()=>{ if(isFinite(video.duration) && video.duration>0){ const t=(seek.value/100)*video.duration; try{ video.currentTime=t; }catch{} } });

    // PiP / Fullscreen
    $('#pipBtn').addEventListener('click', async ()=>{
      try{ if(document.pictureInPictureElement){ await document.exitPictureInPicture(); } else if(video.requestPictureInPicture){ await video.requestPictureInPicture(); } }catch(e){}
    });
    $('#fsBtn').addEventListener('click', ()=>{ const root=$('.modal-body'); if(document.fullscreenElement) document.exitFullscreen(); else root.requestFullscreen?.(); });

    // Keyboard shortcuts
    document.addEventListener('keydown', e=>{
      if(!playerModal.classList.contains('active')) return;
      if(e.code==='Space'){ e.preventDefault(); if(video.paused) video.play().catch(()=>{}); else video.pause(); updatePlayIcons(); }
      if(e.code==='ArrowLeft'){ video.currentTime=Math.max(0, video.currentTime-5); }
      if(e.code==='ArrowRight'){ video.currentTime=video.currentTime+5; }
      if(e.key.toLowerCase()==='m'){ video.muted=!video.muted; volIcon.style.display=video.muted?'none':'inline'; muteIcon.style.display=video.muted?'inline':'none'; }
      if(e.key.toLowerCase()==='f'){ $('#fsBtn').click(); }
    });

    function fmt(sec){ sec=Math.floor(sec||0); const m=String(Math.floor(sec/60)).padStart(2,'0'); const s=String(sec%60).padStart(2,'0'); return `${m}:${s}`; }

    /* =========================
       Language toggle
       ========================= */
    $('#langBtn').addEventListener('click', ()=>{ lang=(lang==='bn'?'en':'bn'); localStorage.setItem('lang',lang); applyI18n(); });

    /* =========================
       INIT
       ========================= */
    function init(){
      renderInfoRail('notice'); renderRibbon();
      initSlider(); renderChannels('all'); renderEvents(); applyI18n();
      computeActionsWidth();
    }
    init();

  })();
  </script>
</body>
</html> 
